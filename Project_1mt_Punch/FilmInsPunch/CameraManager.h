#pragma once

//#include "BeosUtil.h"

//Pylon파일 포함
#include <pylon/PylonIncludes.h>
//기가이더넷용이므로 해당 헤더 포함
#include <pylon/gige/PylonGigEIncludes.h>
#include <pylon/gige/BaslerGigEInstantCamera.h>
//Pylon에서 제공하는 GUI사용시 포함(테스트용)
#include <pylon/PylonGUI.h>

typedef Pylon::CBaslerGigEInstantCamera Camera_t;
using namespace Basler_GigECameraParams;
using namespace Pylon;
using namespace GenApi;



//아래는 인덱스용으로 설정
#define INFO_FRIENDLY_NAME	1
#define INFO_FULL_NAME		2
#define INFO_VENDOR_NAME	3
#define INFO_DEVICE_CLASS	4

#define INFO_SERIAL_NUMBER	10
#define INFO_USER_DEFINED_NAME 11
#define INFO_MODEL_NAME		12
#define INFO_DEVICE_VERSION 13
#define INFO_DEVICE_FACTORY 14
#define INFO_XML_SOURCE		15

//카메라 정보를 저장하기위한 구조체
struct CAMERA_INFO 
{
	//////////////////////////////////////////////////////////////////////////
	//카메라 이름과 모델명(시리얼) : Basler acA640-120gm (21329185)
	TCHAR szFriendlyName[100];
	//카메라 전체이름 : Basler acA640-120gm#003053144821#169.254.34.72:3956
	TCHAR szFullName[100];
	//제조사 이름 : Basler
	TCHAR szVendorName[100];
	//제품타입 : BaslerGigE
	TCHAR szDeviceClass[100];
	//시리얼번호 : 21329185
	TCHAR szSerialNumber[100];    
	//사용자 정의 이름 : 기본 없어용~
	TCHAR szUserDefinedName[100];    
	//모델이름 : acA640-120gm
	TCHAR szModelName[100];    
	//디바이스 버젼 : 104842-12
	TCHAR szDeviceVersion[100];    
	//디바이스 제품 버젼 : GiE/BaslerGigE 4.0.1.3425
	TCHAR szDeviceFactory[100];
	//XML소스 : 기본 없네용
	TCHAR szXMLSource[100];
};

//안전하게 HeartbeatTimeout를 설정하는 간단한 도우미 클래스입니다..
class CHearbeatHelper
{
public:
	explicit CHearbeatHelper(CInstantCamera& camera)
		: m_pHeartbeatTimeout(NULL)
	{
		//m_pHeartbeatTimeout는 NULL이 될 수 있습니다
		m_pHeartbeatTimeout = camera.GetTLNodeMap().GetNode("HeartbeatTimeout");
	}

	bool SetValue(int64_t NewValue)
	{
		//하트 비트 기능을 사용할 수없는 경우는 아무것도하지 않습니다.
		if (!m_pHeartbeatTimeout.IsValid())
			return false;

		// 가를 적용하고 필요한 경우 잘못된 값을 잘라.
		int64_t correctedValue = NewValue - (NewValue % m_pHeartbeatTimeout->GetInc());

		m_pHeartbeatTimeout->SetValue(correctedValue);
		return true;
	}

	bool SetMax()
	{
		// 하트 비트 기능을 사용할 수없는 경우는 아무것도하지 않습니다.
		if (!m_pHeartbeatTimeout.IsValid())
			return false;

		int64_t maxVal = m_pHeartbeatTimeout->GetMax();
		return SetValue(maxVal);
	}

protected:
	GenApi::CIntegerPtr m_pHeartbeatTimeout; // 어떤 노드가 존재하지 않는 경우 노드의 포인터는 NULL이됩니다.
};


class CCameraManager :	public CConfigurationEventHandler,   //카메라 이벤트 핸들러
						public CImageEventHandler            //카메라 이미지 이벤트 핸들러
{

public:
	CCameraManager(void);
	~CCameraManager(void);

	CTlFactory	*m_ptlFactory;
	//CInstantCamera m_camera;
	Camera_t m_camera;	//NativeParameterAccess
	

	struct CAMERA_INFO	m_stCameraInfo;	//카메라디바이스 정보

	// 우리가 찾고있는 카메라를 찾아보십시오.
	DeviceInfoList_t m_DIList;
	bool	m_bFirst;
	bool	m_bFinded;
	bool	m_bRemoved;

	long    m_iSkippiedFrame;

	uint8_t	*pImageBuffer;			// 8bit image receive buffer

private:
	int64_t	m_nLinkTime;

	CPylonImage m_PylonImage;
	CImageFormatConverter m_ImageConverter;
	LARGE_INTEGER freq, freqstart, freqend, freqdiff;
	unsigned lapse; 

	INodeMap *m_pNodeMap; //GenericParameterAccess

public:
	//////////////////////////////////////////////////////////////////////////
	//카메라 찾기 함수 , 특정 카메라를 찾을 경우 필터 적용(전체 내용을 다 적어야됨)
	void SetRemoveTime( UINT16 nTime=3 ); //3초
	INT8 Open_Camera( UINT8 nFilterType=0, LPCTSTR szFilter=_T("") ); 
	INT8 Close_Camera();
	INT8 Grab_Camera(bool bGrab=true );
	bool IsGrabbing();
	bool IsOpen();
	UINT16 Ret_FrameRate();
//////////////////////////////////////////////////////////////////////////
	int64_t Adjust(int64_t val, int64_t minimum, int64_t maximum, int64_t inc);
	//파라메터
	short GetParameter( TCHAR *szNodeName, int64_t *pValue );
	short SetParameter( TCHAR *szNodeName, const int64_t nSetValue=0 );

//***Analog Control// 	GainAuto			Off
//***Analog Control// 	GainSelector		All
//***Analog Control// 	BlackLevelSelector	All
//***Analog Control// 	GammaSelector		User
//***Image Format Controls//	PixelFormat			Mono8
//***Image Format Controls//	TestImageSelector	Off
//***Acquisition Control//	TriggerSelector
//***Acquisition Control//	TriggerMode
//***Acquisition Control//	TriggerSource
//***Acquisition Control//	TriggerActivation
//***Acquisition Control//	ExposureMode
//***Acquisition Control//	ExposureAuto
//***Acquisition Control//	AcquisitionStatusSelector
//***Auto Fouction Parameters//	AutoFunctionProfile
//***Auto Fouction Parameters//***Auto Fuction AOIs//AutoFunctionAOISelector
//***Digital I/O Control//	LineSelector
//***Digital I/O Control//	LineMode
//***Digital I/O Control//	LineLogic
//***Digital I/O Control//	LineFormat
//***Digital I/O Control//	LineSource
//***Digital I/O Control//	UserOutputSelector
//***Sequence Control//***Sequence Control Configuration //SequenceAdvanceMode
//***Sequence Control// TimerSelector
//***Counter and Timer Controls//	TimerSelector
//***Counter and Timer Controls//	TimerTriggerSource
//***Counter and Timer Controls//	TimerTriggerActivation
//***Counter and Timer Controls//	CounterSelector
//***Counter and Timer Controls//	CounterEventSource
//***Counter and Timer Controls//	CounterResetSource
//***LUT Control// LUTSelector
//**User Defined Values// UserDefinedValueSelector
//***Events Generation// EventSelector
//***Events Generation// EventNotification
//***Congifuration Sets// UserSetSelector
//***Congifuration Sets// UserSetDefaultSelector
//***Congifuration Sets// DefaultSetSelector
//***Transport Layer// GevInterfaceSelector
//***Transport Layer// GevCCP
//***Remove Parameter Limits// ParameterSelector
//***ExpertFeature Access// ExpertFeatureAccessSelector
	short GetEnumeration( TCHAR *szNodeName, int64_t *pGetValue, TCHAR *szGetString, UINT16 nCount );
	short SetEnumeration( TCHAR *szNodeName, const int64_t nSetValue=0 );

//***Analog Control// 	GainRaw				300
//***Analog Control// 	BlackLevelRaw		64
//***Analog Control// 	DigitalShift		0
//***AOI Control//	Width				640
//***AOI Control//	Height				480
//***AOI Control//	OffsetX				0
//***AOI Control//	OffsetY				0
//***AOI Control//	BinningVertical		1
//***AOI Control//	BinningHorizontal	1
//***Acquisition Control//	AcquisitionFrameCount
//***Auto Fouction Parameters//	AutoTargetValue
//***Auto Fouction Parameters//	AutoGainRawLowerLimit
//***Auto Fouction Parameters//	AutoGainRawUpperLimit
//***Auto Fouction Parameters//	AutoExposureTimeAbsLowerLimit
//***Auto Fouction Parameters//	AutoExposureTimeAbsUpperLimit
//***Auto Fouction Parameters//***Auto Fuction AOIs //AutoFunctionAOIWidth
//***Auto Fouction Parameters//***Auto Fuction AOIs //AutoFunctionAOIHeight
//***Auto Fouction Parameters//***Auto Fuction AOIs //AutoFunctionAOIOffsetX
//***Auto Fouction Parameters//***Auto Fuction AOIs //AutoFunctionAOIOffsetY
//***Digital I/O Control//	LineStatusAll
//***Sequence Control//***Sequence Control Configuration //	SequenceSetTotalNumber
//***Sequence Control//***Sequence Control Configuration //	SequenceSetIndex
//***Sequence Control//***Sequence Control Configuration //	SequenceSetExecutions
//***Sequence Control// SequenceSetTotalNumber
//***Sequence Control// SequenceSetIndex
//***Sequence Control// SequenceSetExecutions
//***Sequence Control// TimerDelayRaw
//***LUT Control// LUTIndex
//***LUT Control// LUTValue
//**User Defined Values// UserDefinedValue
//***Transport Layer// PayloadSize - 576
//***Transport Layer// GevSCPSPacketSize
//***Transport Layer// GevSCPD
//***Transport Layer// GevSCFTD
//***Transport Layer// GevSCBWR
//***Transport Layer// GevSCBWRA
//***Transport Layer// GevSCBWA
//***Transport Layer// GevSCDMT
//***Transport Layer// GevSCDCT
//***Transport Layer// GevSCFJM
//***Transport Layer// GevVersionMajor
//***Transport Layer// GevVersionMinor
//***Transport Layer// GevDeviceModeCharacterSet
//***Transport Layer// GevMACAddress
//***Transport Layer// GevCurrentIPConfiguration
//***Transport Layer// GevCurrentIPAddress
//***Transport Layer// GevCurrentSubnetMask
//***Transport Layer// GevCurrentDefaultGateway
//***Transport Layer// GevPersistentIPAddress
//***Transport Layer// GevPersistentSubnetMask
//***Transport Layer// GevPersistentDefaultGateway
//***Transport Layer// GevLinkSpeed
//***Transport Layer// GevNumberOfInterfaces
//***Transport Layer// GevMessageChannelCount
//***Transport Layer// GevStreamChannelCount
//***Transport Layer// GevSCPInterfaceIndex
//***Transport Layer// GevSCPHostPort

	int64_t IntCheckMinMax(int64_t val, int64_t minimum, int64_t maximum, int64_t inc);
	short GetInteger( TCHAR *szNodeName, int64_t *pGetValue );
	short SetInteger( TCHAR *szNodeName, const int64_t nSetValue=0 );

//***Analog Control// 	Gamma				1.0
//***Acquisition Control//	TriggerDelayAbs
//***Acquisition Control//	ExposureTimeAbs
//***Acquisition Control//	ExposureTimeRaw
//***Acquisition Control//	ReadoutTimeAbs
//***Acquisition Control//	AcquisitionFrameRateAbs
//***Acquisition Control//	ResultingFrameRateAbs
//***Counter and Timer Controls// TimerDelayTimebaseAbs
//***Counter and Timer Controls// TimerDurationTimebaseAbs
//***Sequence Control// TimerDelayAbs
//***Sequence Control// TimerDurationAbs
//***Sequence Control// TimerDurationRaw
//***Counter and Timer Controls//	TimerDelayTimebaseAbs
//***Counter and Timer Controls//	TimerDurationTimebaseAbs
//***Counter and Timer Controls//	TimerDelayAbs
//***Counter and Timer Controls//	TimerDurationAbs
//***Counter and Timer Controls//	TimerDurationRaw
	float FloatCheckMinMax(float val, float minimum, float maximum, float inc);
	short GetFloat( TCHAR *szNodeName, float *pGetValue );
	short SetFloat( TCHAR *szNodeName, const float nSetValue=0.0 );

//***Image Format Controls//	ReverseX			0
//***AOI Control//	CenterX				0
//***AOI Control//	CenterY				0
//***Acquisition Control//	AcquisitionFrameRateEnable
//***Acquisition Control//	AcquisitionStatus
//***Auto Fouction Parameters//***Auto Fuction AOIs //AutoFunctionAOIUsageIntensity
//***Auto Fouction Parameters//***Auto Fuction AOIs //AutoFunctionAOIUsageWhiteBalance
//***Digital I/O Control//	LineInverter
//***Digital I/O Control//	LineStatus
//***Digital I/O Control//	UserOutputValue
//***Sequence Control//	SequenceEnable
//***LUT Control// LUTEnable
//***Chunk Data Streams// ChunkModeActive
//***Transport Layer// GevDeviceModeIsBigEndian
//***Transport Layer// GevSupportedIPConfigurationLLA
//***Transport Layer// GevSupportedIPConfigurationDHCP
//***Transport Layer// GevSupportedIPConfigurationPersistentIP
//***Transport Layer// GevLinkMaster
//***Transport Layer// GevLinkFullDuplex
//***Transport Layer// GevLinkCrossover
//***Transport Layer// GevSupportedOptionalCommandsEVENTDATA
//***Transport Layer// GevSupportedOptionalCommandsEVENT
//***Transport Layer// GevSupportedOptionalCommandsPACKETRESEND
//***Transport Layer// GevSupportedOptionalCommandsWRITEMEM
//***Transport Layer// GevSupportedOptionalCommandsConcatenation
//***Transport Layer// GevHeartbeatTimeout
//***Transport Layer// GevSCPSBigEndian
//***Remove Parameter Limits// RemoveLimits
//***ExpertFeature Access// ExpertFeatureAccessKey
	short GetBoolean( TCHAR *szNodeName, bool *pGetValue, TCHAR *szGetString, UINT16 nCount );
	short SetBoolean( TCHAR *szNodeName, const bool bSetValue=false );

	//GevFirstURL
	//GevSecondURL

	//***Command//	SequenceSetStore.Execute();
	//***Command//	SequenceSetLoad.Execute();


	/*
	SequenceSetTotalNumber	2
	SequenceSetIndex	0
	SequenceSetExecutions	1
	SequenceAdvanceMode	Auto
	
	TriggerSelector	AcquisitionStart
	TriggerMode	Off
	TriggerSelector	FrameStart
	TriggerMode	Off
	TriggerSelector	FrameStart
	TriggerSelector	AcquisitionStart
	TriggerSource	Line1
	TriggerSelector	FrameStart
	TriggerSource	Line1
	TriggerSelector	FrameStart
	TriggerSelector	AcquisitionStart
	TriggerActivation	RisingEdge
	TriggerSelector	FrameStart
	TriggerActivation	RisingEdge
	TriggerSelector	FrameStart
	TriggerSelector	AcquisitionStart
	TriggerDelayAbs	0
	TriggerSelector	FrameStart
	TriggerDelayAbs	0
	TriggerSelector	FrameStart
	ExposureAuto	Off
	ExposureTimeRaw	8000
	AcquisitionFrameRateAbs	120.005
	AcquisitionFrameRateEnable	0
	ExposureMode	Timed
	LineSelector	Line1
	LineInverter	0
	LineSelector	Out1
	LineInverter	0
	LineSelector	Out1
	LineSelector	Line1
	LineDebouncerTimeRaw	10000
	LineSelector	Out1
	UserOutputValueAll	0
	LineSelector	Line1
	LineMode	Input
	LineSelector	Out1
	LineMode	Output
	LineSelector	Out1
	LineSelector	Out1
	LineSource	UserOutput
	LineSelector	Out1
	LineSelector	Line1
	LineFormat	OptoCoupled
	LineSelector	Out1
	LineFormat	OptoCoupled
	LineSelector	Out1
	CounterSelector	Counter1
	CounterEventSource	FrameTrigger
	CounterSelector	Counter2
	CounterEventSource	FrameStart
	CounterSelector	Counter1
	CounterSelector	Counter1
	CounterResetSource	Off
	CounterSelector	Counter2
	CounterResetSource	Off
	CounterSelector	Counter1
	LUTSelector	Luminance
	LUTEnable	0
	LUTSelector	Luminance
	LUTSelector	Luminance
	LUTValueAll	0x00000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000280000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000003800000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000580000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000006800000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000078000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000880000000000000000000000000000000000000000000000000000000000000090000000000000000000000000000000000000000000000000000000000000009800000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000a800000000000000000000000000000000000000000000000000000000000000b000000000000000000000000000000000000000000000000000000000000000b800000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000c800000000000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000d800000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000e800000000000000000000000000000000000000000000000000000000000000f000000000000000000000000000000000000000000000000000000000000000f80000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010800000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000118000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000001280000000000000000000000000000000000000000000000000000000000000130000000000000000000000000000000000000000000000000000000000000013800000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000148000000000000000000000000000000000000000000000000000000000000015000000000000000000000000000000000000000000000000000000000000001580000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000016800000000000000000000000000000000000000000000000000000000000001700000000000000000000000000000000000000000000000000000000000000178000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001880000000000000000000000000000000000000000000000000000000000000190000000000000000000000000000000000000000000000000000000000000019800000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000001a800000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001b800000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000001c800000000000000000000000000000000000000000000000000000000000001d000000000000000000000000000000000000000000000000000000000000001d800000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000001e800000000000000000000000000000000000000000000000000000000000001f000000000000000000000000000000000000000000000000000000000000001f80000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000020800000000000000000000000000000000000000000000000000000000000002100000000000000000000000000000000000000000000000000000000000000218000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000002280000000000000000000000000000000000000000000000000000000000000230000000000000000000000000000000000000000000000000000000000000023800000000000000000000000000000000000000000000000000000000000002400000000000000000000000000000000000000000000000000000000000000248000000000000000000000000000000000000000000000000000000000000025000000000000000000000000000000000000000000000000000000000000002580000000000000000000000000000000000000000000000000000000000000260000000000000000000000000000000000000000000000000000000000000026800000000000000000000000000000000000000000000000000000000000002700000000000000000000000000000000000000000000000000000000000000278000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000002880000000000000000000000000000000000000000000000000000000000000290000000000000000000000000000000000000000000000000000000000000029800000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000002a800000000000000000000000000000000000000000000000000000000000002b000000000000000000000000000000000000000000000000000000000000002b800000000000000000000000000000000000000000000000000000000000002c000000000000000000000000000000000000000000000000000000000000002c800000000000000000000000000000000000000000000000000000000000002d000000000000000000000000000000000000000000000000000000000000002d800000000000000000000000000000000000000000000000000000000000002e000000000000000000000000000000000000000000000000000000000000002e800000000000000000000000000000000000000000000000000000000000002f000000000000000000000000000000000000000000000000000000000000002f80000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000030800000000000000000000000000000000000000000000000000000000000003100000000000000000000000000000000000000000000000000000000000000318000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000003280000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000000000000000000000000000000033800000000000000000000000000000000000000000000000000000000000003400000000000000000000000000000000000000000000000000000000000000348000000000000000000000000000000000000000000000000000000000000035000000000000000000000000000000000000000000000000000000000000003580000000000000000000000000000000000000000000000000000000000000360000000000000000000000000000000000000000000000000000000000000036800000000000000000000000000000000000000000000000000000000000003700000000000000000000000000000000000000000000000000000000000000378000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000003880000000000000000000000000000000000000000000000000000000000000390000000000000000000000000000000000000000000000000000000000000039800000000000000000000000000000000000000000000000000000000000003a000000000000000000000000000000000000000000000000000000000000003a800000000000000000000000000000000000000000000000000000000000003b000000000000000000000000000000000000000000000000000000000000003b800000000000000000000000000000000000000000000000000000000000003c000000000000000000000000000000000000000000000000000000000000003c800000000000000000000000000000000000000000000000000000000000003d000000000000000000000000000000000000000000000000000000000000003d800000000000000000000000000000000000000000000000000000000000003e000000000000000000000000000000000000000000000000000000000000003e800000000000000000000000000000000000000000000000000000000000003f000000000000000000000000000000000000000000000000000000000000003f80000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000040800000000000000000000000000000000000000000000000000000000000004100000000000000000000000000000000000000000000000000000000000000418000000000000000000000000000000000000000000000000000000000000042000000000000000000000000000000000000000000000000000000000000004280000000000000000000000000000000000000000000000000000000000000430000000000000000000000000000000000000000000000000000000000000043800000000000000000000000000000000000000000000000000000000000004400000000000000000000000000000000000000000000000000000000000000448000000000000000000000000000000000000000000000000000000000000045000000000000000000000000000000000000000000000000000000000000004580000000000000000000000000000000000000000000000000000000000000460000000000000000000000000000000000000000000000000000000000000046800000000000000000000000000000000000000000000000000000000000004700000000000000000000000000000000000000000000000000000000000000478000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000000000000000000000000000000000000004880000000000000000000000000000000000000000000000000000000000000490000000000000000000000000000000000000000000000000000000000000049800000000000000000000000000000000000000000000000000000000000004a000000000000000000000000000000000000000000000000000000000000004a800000000000000000000000000000000000000000000000000000000000004b000000000000000000000000000000000000000000000000000000000000004b800000000000000000000000000000000000000000000000000000000000004c000000000000000000000000000000000000000000000000000000000000004c800000000000000000000000000000000000000000000000000000000000004d000000000000000000000000000000000000000000000000000000000000004d800000000000000000000000000000000000000000000000000000000000004e000000000000000000000000000000000000000000000000000000000000004e800000000000000000000000000000000000000000000000000000000000004f000000000000000000000000000000000000000000000000000000000000004f80000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000050800000000000000000000000000000000000000000000000000000000000005100000000000000000000000000000000000000000000000000000000000000518000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000000000000000000000000000000000005280000000000000000000000000000000000000000000000000000000000000530000000000000000000000000000000000000000000000000000000000000053800000000000000000000000000000000000000000000000000000000000005400000000000000000000000000000000000000000000000000000000000000548000000000000000000000000000000000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000000005580000000000000000000000000000000000000000000000000000000000000560000000000000000000000000000000000000000000000000000000000000056800000000000000000000000000000000000000000000000000000000000005700000000000000000000000000000000000000000000000000000000000000578000000000000000000000000000000000000000000000000000000000000058000000000000000000000000000000000000000000000000000000000000005880000000000000000000000000000000000000000000000000000000000000590000000000000000000000000000000000000000000000000000000000000059800000000000000000000000000000000000000000000000000000000000005a000000000000000000000000000000000000000000000000000000000000005a800000000000000000000000000000000000000000000000000000000000005b000000000000000000000000000000000000000000000000000000000000005b800000000000000000000000000000000000000000000000000000000000005c000000000000000000000000000000000000000000000000000000000000005c800000000000000000000000000000000000000000000000000000000000005d000000000000000000000000000000000000000000000000000000000000005d800000000000000000000000000000000000000000000000000000000000005e000000000000000000000000000000000000000000000000000000000000005e800000000000000000000000000000000000000000000000000000000000005f000000000000000000000000000000000000000000000000000000000000005f80000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000060800000000000000000000000000000000000000000000000000000000000006100000000000000000000000000000000000000000000000000000000000000618000000000000000000000000000000000000000000000000000000000000062000000000000000000000000000000000000000000000000000000000000006280000000000000000000000000000000000000000000000000000000000000630000000000000000000000000000000000000000000000000000000000000063800000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000648000000000000000000000000000000000000000000000000000000000000065000000000000000000000000000000000000000000000000000000000000006580000000000000000000000000000000000000000000000000000000000000660000000000000000000000000000000000000000000000000000000000000066800000000000000000000000000000000000000000000000000000000000006700000000000000000000000000000000000000000000000000000000000000678000000000000000000000000000000000000000000000000000000000000068000000000000000000000000000000000000000000000000000000000000006880000000000000000000000000000000000000000000000000000000000000690000000000000000000000000000000000000000000000000000000000000069800000000000000000000000000000000000000000000000000000000000006a000000000000000000000000000000000000000000000000000000000000006a800000000000000000000000000000000000000000000000000000000000006b000000000000000000000000000000000000000000000000000000000000006b800000000000000000000000000000000000000000000000000000000000006c000000000000000000000000000000000000000000000000000000000000006c800000000000000000000000000000000000000000000000000000000000006d000000000000000000000000000000000000000000000000000000000000006d800000000000000000000000000000000000000000000000000000000000006e000000000000000000000000000000000000000000000000000000000000006e800000000000000000000000000000000000000000000000000000000000006f000000000000000000000000000000000000000000000000000000000000006f80000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000070800000000000000000000000000000000000000000000000000000000000007100000000000000000000000000000000000000000000000000000000000000718000000000000000000000000000000000000000000000000000000000000072000000000000000000000000000000000000000000000000000000000000007280000000000000000000000000000000000000000000000000000000000000730000000000000000000000000000000000000000000000000000000000000073800000000000000000000000000000000000000000000000000000000000007400000000000000000000000000000000000000000000000000000000000000748000000000000000000000000000000000000000000000000000000000000075000000000000000000000000000000000000000000000000000000000000007580000000000000000000000000000000000000000000000000000000000000760000000000000000000000000000000000000000000000000000000000000076800000000000000000000000000000000000000000000000000000000000007700000000000000000000000000000000000000000000000000000000000000778000000000000000000000000000000000000000000000000000000000000078000000000000000000000000000000000000000000000000000000000000007880000000000000000000000000000000000000000000000000000000000000790000000000000000000000000000000000000000000000000000000000000079800000000000000000000000000000000000000000000000000000000000007a000000000000000000000000000000000000000000000000000000000000007a800000000000000000000000000000000000000000000000000000000000007b000000000000000000000000000000000000000000000000000000000000007b800000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000000000000000000007c800000000000000000000000000000000000000000000000000000000000007d000000000000000000000000000000000000000000000000000000000000007d800000000000000000000000000000000000000000000000000000000000007e000000000000000000000000000000000000000000000000000000000000007e800000000000000000000000000000000000000000000000000000000000007f000000000000000000000000000000000000000000000000000000000000007f80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000080800000000000000000000000000000000000000000000000000000000000008100000000000000000000000000000000000000000000000000000000000000818000000000000000000000000000000000000000000000000000000000000082000000000000000000000000000000000000000000000000000000000000008280000000000000000000000000000000000000000000000000000000000000830000000000000000000000000000000000000000000000000000000000000083800000000000000000000000000000000000000000000000000000000000008400000000000000000000000000000000000000000000000000000000000000848000000000000000000000000000000000000000000000000000000000000085000000000000000000000000000000000000000000000000000000000000008580000000000000000000000000000000000000000000000000000000000000860000000000000000000000000000000000000000000000000000000000000086800000000000000000000000000000000000000000000000000000000000008700000000000000000000000000000000000000000000000000000000000000878000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000000000000000000008880000000000000000000000000000000000000000000000000000000000000890000000000000000000000000000000000000000000000000000000000000089800000000000000000000000000000000000000000000000000000000000008a000000000000000000000000000000000000000000000000000000000000008a800000000000000000000000000000000000000000000000000000000000008b000000000000000000000000000000000000000000000000000000000000008b800000000000000000000000000000000000000000000000000000000000008c000000000000000000000000000000000000000000000000000000000000008c800000000000000000000000000000000000000000000000000000000000008d000000000000000000000000000000000000000000000000000000000000008d800000000000000000000000000000000000000000000000000000000000008e000000000000000000000000000000000000000000000000000000000000008e800000000000000000000000000000000000000000000000000000000000008f000000000000000000000000000000000000000000000000000000000000008f80000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000000090800000000000000000000000000000000000000000000000000000000000009100000000000000000000000000000000000000000000000000000000000000918000000000000000000000000000000000000000000000000000000000000092000000000000000000000000000000000000000000000000000000000000009280000000000000000000000000000000000000000000000000000000000000930000000000000000000000000000000000000000000000000000000000000093800000000000000000000000000000000000000000000000000000000000009400000000000000000000000000000000000000000000000000000000000000948000000000000000000000000000000000000000000000000000000000000095000000000000000000000000000000000000000000000000000000000000009580000000000000000000000000000000000000000000000000000000000000960000000000000000000000000000000000000000000000000000000000000096800000000000000000000000000000000000000000000000000000000000009700000000000000000000000000000000000000000000000000000000000000978000000000000000000000000000000000000000000000000000000000000098000000000000000000000000000000000000000000000000000000000000009880000000000000000000000000000000000000000000000000000000000000990000000000000000000000000000000000000000000000000000000000000099800000000000000000000000000000000000000000000000000000000000009a000000000000000000000000000000000000000000000000000000000000009a800000000000000000000000000000000000000000000000000000000000009b000000000000000000000000000000000000000000000000000000000000009b800000000000000000000000000000000000000000000000000000000000009c000000000000000000000000000000000000000000000000000000000000009c800000000000000000000000000000000000000000000000000000000000009d000000000000000000000000000000000000000000000000000000000000009d800000000000000000000000000000000000000000000000000000000000009e000000000000000000000000000000000000000000000000000000000000009e800000000000000000000000000000000000000000000000000000000000009f000000000000000000000000000000000000000000000000000000000000009f80000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000a080000000000000000000000000000000000000000000000000000000000000a100000000000000000000000000000000000000000000000000000000000000a180000000000000000000000000000000000000000000000000000000000000a200000000000000000000000000000000000000000000000000000000000000a280000000000000000000000000000000000000000000000000000000000000a300000000000000000000000000000000000000000000000000000000000000a380000000000000000000000000000000000000000000000000000000000000a400000000000000000000000000000000000000000000000000000000000000a480000000000000000000000000000000000000000000000000000000000000a500000000000000000000000000000000000000000000000000000000000000a580000000000000000000000000000000000000000000000000000000000000a600000000000000000000000000000000000000000000000000000000000000a680000000000000000000000000000000000000000000000000000000000000a700000000000000000000000000000000000000000000000000000000000000a780000000000000000000000000000000000000000000000000000000000000a800000000000000000000000000000000000000000000000000000000000000a880000000000000000000000000000000000000000000000000000000000000a900000000000000000000000000000000000000000000000000000000000000a980000000000000000000000000000000000000000000000000000000000000aa00000000000000000000000000000000000000000000000000000000000000aa80000000000000000000000000000000000000000000000000000000000000ab00000000000000000000000000000000000000000000000000000000000000ab80000000000000000000000000000000000000000000000000000000000000ac00000000000000000000000000000000000000000000000000000000000000ac80000000000000000000000000000000000000000000000000000000000000ad00000000000000000000000000000000000000000000000000000000000000ad80000000000000000000000000000000000000000000000000000000000000ae00000000000000000000000000000000000000000000000000000000000000ae80000000000000000000000000000000000000000000000000000000000000af00000000000000000000000000000000000000000000000000000000000000af80000000000000000000000000000000000000000000000000000000000000b000000000000000000000000000000000000000000000000000000000000000b080000000000000000000000000000000000000000000000000000000000000b100000000000000000000000000000000000000000000000000000000000000b180000000000000000000000000000000000000000000000000000000000000b200000000000000000000000000000000000000000000000000000000000000b280000000000000000000000000000000000000000000000000000000000000b300000000000000000000000000000000000000000000000000000000000000b380000000000000000000000000000000000000000000000000000000000000b400000000000000000000000000000000000000000000000000000000000000b480000000000000000000000000000000000000000000000000000000000000b500000000000000000000000000000000000000000000000000000000000000b580000000000000000000000000000000000000000000000000000000000000b600000000000000000000000000000000000000000000000000000000000000b680000000000000000000000000000000000000000000000000000000000000b700000000000000000000000000000000000000000000000000000000000000b780000000000000000000000000000000000000000000000000000000000000b800000000000000000000000000000000000000000000000000000000000000b880000000000000000000000000000000000000000000000000000000000000b900000000000000000000000000000000000000000000000000000000000000b980000000000000000000000000000000000000000000000000000000000000ba00000000000000000000000000000000000000000000000000000000000000ba80000000000000000000000000000000000000000000000000000000000000bb00000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000000000000000000000000000000000000000000bc00000000000000000000000000000000000000000000000000000000000000bc80000000000000000000000000000000000000000000000000000000000000bd00000000000000000000000000000000000000000000000000000000000000bd80000000000000000000000000000000000000000000000000000000000000be00000000000000000000000000000000000000000000000000000000000000be80000000000000000000000000000000000000000000000000000000000000bf00000000000000000000000000000000000000000000000000000000000000bf80000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000c080000000000000000000000000000000000000000000000000000000000000c100000000000000000000000000000000000000000000000000000000000000c180000000000000000000000000000000000000000000000000000000000000c200000000000000000000000000000000000000000000000000000000000000c280000000000000000000000000000000000000000000000000000000000000c300000000000000000000000000000000000000000000000000000000000000c380000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c480000000000000000000000000000000000000000000000000000000000000c500000000000000000000000000000000000000000000000000000000000000c580000000000000000000000000000000000000000000000000000000000000c600000000000000000000000000000000000000000000000000000000000000c680000000000000000000000000000000000000000000000000000000000000c700000000000000000000000000000000000000000000000000000000000000c780000000000000000000000000000000000000000000000000000000000000c800000000000000000000000000000000000000000000000000000000000000c880000000000000000000000000000000000000000000000000000000000000c900000000000000000000000000000000000000000000000000000000000000c980000000000000000000000000000000000000000000000000000000000000ca00000000000000000000000000000000000000000000000000000000000000ca80000000000000000000000000000000000000000000000000000000000000cb00000000000000000000000000000000000000000000000000000000000000cb80000000000000000000000000000000000000000000000000000000000000cc00000000000000000000000000000000000000000000000000000000000000cc80000000000000000000000000000000000000000000000000000000000000cd00000000000000000000000000000000000000000000000000000000000000cd80000000000000000000000000000000000000000000000000000000000000ce00000000000000000000000000000000000000000000000000000000000000ce80000000000000000000000000000000000000000000000000000000000000cf00000000000000000000000000000000000000000000000000000000000000cf80000000000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000d080000000000000000000000000000000000000000000000000000000000000d100000000000000000000000000000000000000000000000000000000000000d180000000000000000000000000000000000000000000000000000000000000d200000000000000000000000000000000000000000000000000000000000000d280000000000000000000000000000000000000000000000000000000000000d300000000000000000000000000000000000000000000000000000000000000d380000000000000000000000000000000000000000000000000000000000000d400000000000000000000000000000000000000000000000000000000000000d480000000000000000000000000000000000000000000000000000000000000d500000000000000000000000000000000000000000000000000000000000000d580000000000000000000000000000000000000000000000000000000000000d600000000000000000000000000000000000000000000000000000000000000d680000000000000000000000000000000000000000000000000000000000000d700000000000000000000000000000000000000000000000000000000000000d780000000000000000000000000000000000000000000000000000000000000d800000000000000000000000000000000000000000000000000000000000000d880000000000000000000000000000000000000000000000000000000000000d900000000000000000000000000000000000000000000000000000000000000d980000000000000000000000000000000000000000000000000000000000000da00000000000000000000000000000000000000000000000000000000000000da80000000000000000000000000000000000000000000000000000000000000db00000000000000000000000000000000000000000000000000000000000000db80000000000000000000000000000000000000000000000000000000000000dc00000000000000000000000000000000000000000000000000000000000000dc80000000000000000000000000000000000000000000000000000000000000dd00000000000000000000000000000000000000000000000000000000000000dd80000000000000000000000000000000000000000000000000000000000000de00000000000000000000000000000000000000000000000000000000000000de80000000000000000000000000000000000000000000000000000000000000df00000000000000000000000000000000000000000000000000000000000000df80000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000e080000000000000000000000000000000000000000000000000000000000000e100000000000000000000000000000000000000000000000000000000000000e180000000000000000000000000000000000000000000000000000000000000e200000000000000000000000000000000000000000000000000000000000000e280000000000000000000000000000000000000000000000000000000000000e300000000000000000000000000000000000000000000000000000000000000e380000000000000000000000000000000000000000000000000000000000000e400000000000000000000000000000000000000000000000000000000000000e480000000000000000000000000000000000000000000000000000000000000e500000000000000000000000000000000000000000000000000000000000000e580000000000000000000000000000000000000000000000000000000000000e600000000000000000000000000000000000000000000000000000000000000e680000000000000000000000000000000000000000000000000000000000000e700000000000000000000000000000000000000000000000000000000000000e780000000000000000000000000000000000000000000000000000000000000e800000000000000000000000000000000000000000000000000000000000000e880000000000000000000000000000000000000000000000000000000000000e900000000000000000000000000000000000000000000000000000000000000e980000000000000000000000000000000000000000000000000000000000000ea00000000000000000000000000000000000000000000000000000000000000ea80000000000000000000000000000000000000000000000000000000000000eb00000000000000000000000000000000000000000000000000000000000000eb80000000000000000000000000000000000000000000000000000000000000ec00000000000000000000000000000000000000000000000000000000000000ec80000000000000000000000000000000000000000000000000000000000000ed00000000000000000000000000000000000000000000000000000000000000ed80000000000000000000000000000000000000000000000000000000000000ee00000000000000000000000000000000000000000000000000000000000000ee80000000000000000000000000000000000000000000000000000000000000ef00000000000000000000000000000000000000000000000000000000000000ef80000000000000000000000000000000000000000000000000000000000000f000000000000000000000000000000000000000000000000000000000000000f080000000000000000000000000000000000000000000000000000000000000f100000000000000000000000000000000000000000000000000000000000000f180000000000000000000000000000000000000000000000000000000000000f200000000000000000000000000000000000000000000000000000000000000f280000000000000000000000000000000000000000000000000000000000000f300000000000000000000000000000000000000000000000000000000000000f380000000000000000000000000000000000000000000000000000000000000f400000000000000000000000000000000000000000000000000000000000000f480000000000000000000000000000000000000000000000000000000000000f500000000000000000000000000000000000000000000000000000000000000f580000000000000000000000000000000000000000000000000000000000000f600000000000000000000000000000000000000000000000000000000000000f680000000000000000000000000000000000000000000000000000000000000f700000000000000000000000000000000000000000000000000000000000000f780000000000000000000000000000000000000000000000000000000000000f800000000000000000000000000000000000000000000000000000000000000f880000000000000000000000000000000000000000000000000000000000000f900000000000000000000000000000000000000000000000000000000000000f980000000000000000000000000000000000000000000000000000000000000fa00000000000000000000000000000000000000000000000000000000000000fa80000000000000000000000000000000000000000000000000000000000000fb00000000000000000000000000000000000000000000000000000000000000fb80000000000000000000000000000000000000000000000000000000000000fc00000000000000000000000000000000000000000000000000000000000000fc80000000000000000000000000000000000000000000000000000000000000fd00000000000000000000000000000000000000000000000000000000000000fd80000000000000000000000000000000000000000000000000000000000000fe00000000000000000000000000000000000000000000000000000000000000fe80000000000000000000000000000000000000000000000000000000000000ff00000000000000000000000000000000000000000000000000000000000000ff800000000000000000000000000000000000000000000000000000000
	LUTSelector	Luminance
	GevStreamChannelSelector	StreamChannel0
	GevSCPSPacketSize	576
	GevStreamChannelSelector	StreamChannel0
	GevStreamChannelSelector	StreamChannel0
	GevSCPD	0
	GevStreamChannelSelector	StreamChannel0
	GevStreamChannelSelector	StreamChannel0
	GevSCFTD	0
	GevStreamChannelSelector	StreamChannel0
	GevStreamChannelSelector	StreamChannel0
	GevSCBWR	10
	GevStreamChannelSelector	StreamChannel0
	GevStreamChannelSelector	StreamChannel0
	GevSCBWRA	10
	GevStreamChannelSelector	StreamChannel0
	AutoTargetValue	128
	AutoGainRawLowerLimit	300
	AutoGainRawUpperLimit	850
	AutoExposureTimeAbsLowerLimit	100
	AutoExposureTimeAbsUpperLimit	1e+006
	AutoFunctionProfile	GainMinimum
	AutoFunctionAOISelector	AOI1
	AutoFunctionAOIWidth	659
	AutoFunctionAOISelector	AOI2
	AutoFunctionAOIWidth	659
	AutoFunctionAOISelector	AOI1
	AutoFunctionAOISelector	AOI1
	AutoFunctionAOIHeight	494
	AutoFunctionAOISelector	AOI2
	AutoFunctionAOIHeight	494
	AutoFunctionAOISelector	AOI1
	AutoFunctionAOISelector	AOI1
	AutoFunctionAOIOffsetX	0
	AutoFunctionAOISelector	AOI2
	AutoFunctionAOIOffsetX	0
	AutoFunctionAOISelector	AOI1
	AutoFunctionAOISelector	AOI1
	AutoFunctionAOIOffsetY	0
	AutoFunctionAOISelector	AOI2
	AutoFunctionAOIOffsetY	0
	AutoFunctionAOISelector	AOI1
	UserDefinedValueSelector	Value1
	UserDefinedValue	0
	UserDefinedValueSelector	Value2
	UserDefinedValue	0
	UserDefinedValueSelector	Value3
	UserDefinedValue	0
	UserDefinedValueSelector	Value4
	UserDefinedValue	0
	UserDefinedValueSelector	Value5
	UserDefinedValue	0
	UserDefinedValueSelector	Value1
	ParameterSelector	Gain
	RemoveLimits	0
	ParameterSelector	Framerate
	RemoveLimits	0
	ParameterSelector	Gain
	ChunkModeActive	0
	EventSelector	ExposureEnd
	EventNotification	Off
	EventSelector	FrameStartOvertrigger
	EventNotification	Off
	EventSelector	AcquisitionStartOvertrigger
	EventNotification	Off
	EventSelector	FrameStart
	EventNotification	Off
	EventSelector	AcquisitionStart
	EventNotification	Off
	EventSelector	EventOverrun
	EventNotification	Off
	EventSelector	ExposureEnd
	*/

private:
	//////////////////////////////////////////////////////////////////////////
	// 이벤트처리 관련 함수
	virtual void OnAttach( CInstantCamera& /*camera*/);
	virtual void OnAttached( CInstantCamera& camera);
	virtual void OnOpen( CInstantCamera& camera);
	virtual void OnOpened( CInstantCamera& camera);
	virtual void OnClose( CInstantCamera& camera);
	virtual void OnClosed( CInstantCamera& camera); 
	virtual void OnDestroy( CInstantCamera& camera); 
	virtual void OnDestroyed( CInstantCamera& /*camera*/);
	virtual void OnDetach( CInstantCamera& camera);
	virtual void OnDetached( CInstantCamera& camera);
	virtual void OnCameraDeviceRemoved( CInstantCamera& camera);

	//이미지 획득 이벤트 처리 함수
	virtual void OnGrabStart( CInstantCamera& camera);
	virtual void OnGrabStarted( CInstantCamera& camera);
	virtual void OnGrabStop( CInstantCamera& camera);
	virtual void OnGrabStopped( CInstantCamera& camera);
	virtual void OnGrabError( CInstantCamera& camera, const String_t errorMessage);
	virtual void OnImagesSkipped( CInstantCamera& camera, size_t countOfSkippedImages);
	virtual void OnImageGrabbed( CInstantCamera& camera, const CGrabResultPtr& ptrGrabResult);

};
